# 判定（Judgement）の説明

## 1. 判定の仕組み
- 各指標に「しきい値（threshold）」の範囲を設定
- 全指標が範囲内 → **OK**
- 1つでも範囲外 → **NG**（どの指標が外れたかを理由として列挙）

## 2. 判定結果の形式
- `verdict`: "OK" または "NG"
- `reasons`: NGの場合、理由の配列（例: ["brightness_mean=50 は許容範囲外"]）

## 3. 現在のしきい値（初期値）
| 指標 | 下限 | 上限 |
|---|---|---|
| sharpness_lap_var | 2.16 | なし |
| brightness_mean | 137.19 | 158.55 |
| contrast_std | 11.39 | なし |

※ thresholds.md / thresholds.json 参照

## 4. しきい値の決め方
- sharp画像とblur画像で指標値を比較
- Balanced Accuracy が最大になる境界値を採用
- 現在の精度: Balanced Accuracy 0.80

## 5. 注意点・限界
- **被写体依存**: 平坦な画像は"ぼけ"と区別しにくい
- **ノイズの影響**: ノイズでシャープネスが高く見えることがある
- **照明条件**: 逆光・スポットライトで平均輝度が当てにならない
- **色情報を捨てている**: グレースケール評価なので色かぶりは検出不可

## 6. 今後の調整
- Day17でスライダーUIから調整可能にする予定
- しきい値は固定値ではなく、運用しながら改善する前提
